<div>
  {% if response.verification.disabled_reason %}
    <div class="alert alert-danger" role="alert">
      {{ "modules/stripe/disabled_reason." | append: response.verification.disabled_reason | t }}
    </div>
  {% endif %}

  {% if response != blank and response.verification.fields_needed != empty %}
    {% parse_json "alert" %}
      {% if response.payouts_enabled != true and response.verification.fields_needed == empty and response.requirements.currently_due == empty %}
        {
        "type": "info",
        "msg": "We are validating your account, you will be notified by email when status is changed"
        }
      {% elsif response.charges_enabled != true %}
        {
        "type": "danger",
        "msg": "Account payment is currently disabled, please provide the following information so that we can enable your payments."
        }
      {% elsif response.payouts_enabled != true %}
        {
        "type": "warning",
        "msg": "Account payouts is currently disabled, please provide the following information so that we can enable your payoyts."
        }
      {% elsif false %}
        {
        "type":"info",
        "msg": "Your account is now enabled for payouts. Please provide the following information at your convenience: "
        }
      {% else %}
        {}
      {% endif %}
    {% endparse_json %}
    <div class="alert alert-{{ alert.type }}" role="alert">
      <p>{{ alert.msg }}</p>
      <ul class='mt-3'>
        {% for field_needed in response.verification.fields_needed %}
          <li>
            {{ 'modules/stripe/' | append: field_needed | t }}
          </li>
        {% endfor%}
        {% for field in response.requirements.currently_due %}
          {% unless field contains 'person_' %}
            <li>
              {{ 'modules/stripe/requirements.' | append: field | t }}
            </li>
          {% endunless %}
        {% endfor %}
      </ul>
    </div>
  {% endif %}
</div>


